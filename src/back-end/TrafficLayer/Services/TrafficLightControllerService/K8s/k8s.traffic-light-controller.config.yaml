apiVersion: v1
kind: ConfigMap
metadata:
  name: traffic-light-controller-config
  namespace: uniwa-stls
data:
  ASPNETCORE_ENVIRONMENT: "Development"
  ASPNETCORE_URLS: "http://+:8080"
  SERVICE_LAYER: "Traffic"
  SERVICE_LEVEL: "Edge"
  SERVICE_NAME: "Traffic Light Controller"

  # Intersection Details
  Intersection__Id: "1"
  Intersection__Name: "Agiou Spyridonos"

  # Traffic Light Details
  TrafficLight__Id: "101"
  TrafficLight__Name: "Agiou Spyridonos"

  # TrafficLightCacheDB (Redis)
  Redis__TrafficLight__Host: "traffic-light-cache-db-svc"
  Redis__TrafficLight__Port: "6379"
  Redis__TrafficLight__Password: ""
  Redis__TrafficLight__Database: "0"
  Redis__TrafficLight__KeyPrefix__State: "traffic_light:{intersection}:{light}:state"
  Redis__TrafficLight__KeyPrefix__CurrentPhase: "traffic_light:{intersection}:{light}:phase"
  Redis__TrafficLight__KeyPrefix__RemainingTime: "traffic_light:{intersection}:{light}:remaining"
  Redis__TrafficLight__KeyPrefix__Duration: "traffic_light:{intersection}:{light}:duration"
  Redis__TrafficLight__KeyPrefix__LastUpdate: "traffic_light:{intersection}:{light}:last_update"
  Redis__TrafficLight__KeyPrefix__CycleDuration: "traffic_light:{intersection}:{light}:cycle_duration"
  Redis__TrafficLight__KeyPrefix__Offset: "traffic_light:{intersection}:{light}:offset"
  Redis__TrafficLight__KeyPrefix__LocalOffset: "traffic_light:{intersection}:{light}:local_offset"
  Redis__TrafficLight__KeyPrefix__CycleProgress: "traffic_light:{intersection}:{light}:cycle_progress"
  Redis__TrafficLight__KeyPrefix__Mode: "traffic_light:{intersection}:{light}:mode"
  Redis__TrafficLight__KeyPrefix__Priority: "traffic_light:{intersection}:{light}:priority"
  Redis__TrafficLight__KeyPrefix__CachedPhases: "traffic_light:{intersection}:{light}:cached_phases"
  Redis__TrafficLight__KeyPrefix__FailoverActive: "traffic_light:{intersection}:{light}:failover"
  Redis__TrafficLight__KeyPrefix__LastCoordinatorSync: "traffic_light:{intersection}:last_sync"
  Redis__TrafficLight__KeyPrefix__Heartbeat: "traffic_light:{intersection}:{light}:heartbeat"

  # CORS
  Cors__AllowedOrigins: "http://localhost:5173,https://uniwa-stls.local"
  Cors__AllowedMethods: "GET,POST,PUT,PATCH,DELETE,OPTIONS"
  Cors__AllowedHeaders: "Content-Type,Authorization"

  # JWT
  Jwt__Issuer: "http://uniwa-stls-backend:8080"
  Jwt__Audience: "http://uniwa-stls-backend:8080"

  # RabbitMQ
  ## Configuration
  RabbitMQ__Host: "rabbitmq-svc"
  RabbitMQ__VirtualHost: "/"
  RabbitMQ__Port: "5672"

  ## Exchanges
  RabbitMQ__Exchanges__Traffic: "TRAFFIC.EXCHANGE"
  RabbitMQ__Exchanges__Log: "LOG.EXCHANGE"

  ## Queues
  RabbitMQ__Queues__Traffic__LightControl: "intersection-controller-2-traffic-light-controller.{intersection}.{light}.queue"

  ## Routing Keys
  ### Consume
  RabbitMQ__RoutingKeys__Traffic__LightControl: "traffic.light.control.#"
  ### Publish
  RabbitMQ__RoutingKeys__Log__LightController: "log.{layer}.{service}.{type}"